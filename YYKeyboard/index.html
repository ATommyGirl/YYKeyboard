<!DOCTYPE html>
<html>
 <head>
  <title></title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <meta name="description" content="" />
  <style>
                            body {
                                margin: 0px;
                            }
                        
                        #header {
                            height: 44px;
                            background-color: #4187C5;
                        }
                        
                        #header .title {
                            text-align: center;
                            box-sizing: border-box;
                            padding: 0px 40px;
                            text-overflow: ellipsis;
                            overflow: hidden;
                            white-space: nowrap;
                            color: #fff;
                            font-weight: bold;
                            line-height: 44px;
                        }
                        </style>
 </head>
 <body>
  <header id="header">
   <div class="title">
   </div>
  </header>
  <div class="content">
   <a href="b2bjoy://hahha?i=1" title="Emily's Blog">Welcome</a>
   <button onclick="pickme()" name="click me!!!">选我选我</button>
   <br />
   <br />
   <button onclick="back()" name="back">返回</button>
   <br />
   <br />
   <button onclick="closew()" name="close">关闭</button>
   <br />
   <br />
   <button onclick="serverURL()" name="url">服务器地址</button>
   <br />
   <br />
   <button onclick="openCamera()" name="openCamera">拍照</button>
   <br />
   <br />
   <button onclick="scan()" name="scan">扫一扫</button>
   <br />
   <br />
   <button onclick="scanFromImage()" name="scanFromImage">识别图片中的二维码</button>
   <br />
   <br />
   <button onclick="testGetUserName()" name="getUserName">获取用户名</button>
   <br />
   <br />
   <button onclick="testGetPassword()" name="getPassword">获取密码</button>
   <br />
   <br />
   <button onclick="testSetValueForKey()" name="setkey">错误设置</button>
   <br />
   <br />
   <button onclick="testSetValueForKey1()" name="setkey">正确设置</button>
   <br />
   <br />
   <button onclick="getCurrentUser()" name="getCurrentUser">个人信息</button>
   <br />
   <br />
   <button onclick="scheduleAdd()" name="scheduleAdd">日历添加</button>
   <br />
   <br />
   <button onclick="scheduleDelete()" name="scheduleDelete">日历删除</button>
   <br />
   <br />
   <button onclick="download()" name="download">下载</button>
   <br />
   <br />
   <button onclick="launchLocalFilePath()" name="launchLocalFilePath">本地file地址</button>
   <br />
   <br />
   <button onclick="logout()" name="setkey">退出登录</button>
   <br />
   <br />
   <button onclick="keyboard()" name="keyboard">键盘</button>
   <br />
   <br />
   <input type="text" placeholder="测试输入框"/>
   <br />
   <input type="number"  placeholder="请输入数字" />
   <br />
   <input type="password" id="password" placeholder="请输入密码" onFocus="keyboard()" onBlur="closeKeyboard()"/>
   <br />
   <br />
   <br />
   <br />
   <br />
   <br />

  </div>
  <!--  <script type="text/javascript" src="cordova.js"></script>-->
  <!--    <script type="text/javascript" src="js/index.js"></script>-->
  <script>
    function pickme() {
        alert('逗你玩!');
        window.open('https://mobile.mochasoft.com.cn/hannan_dev/cetralservice/certificationReception.do?appid=gongdan1');
    }
    
    function back() {
        MPWebView.goback();
    }
    
    function closew() {
        //MPWebView.close();
        MXWebui.closeWindow();
    }
    function logout() {
        //MPWebView.logout();
        MXClientLogOff.logoff();
    }
    
    function serverURL() {
        MXCommon.getServerUrl(
          function(url){
           //这里可以处理服务器地址url
          alert(url);
          }
        );
    }
  
  function getCurrentUser() {
      MXCommon.getCurrentUser(
        function(msg){
          alert('id: '              + msg.id                + '\n' +
                'dept_id: '         + msg.dept_id           + '\n' +
                'email: '           + msg.email             + '\n' +
                'dept_code: '       + msg.dept_code         + '\n' +
                'login_name: '      + msg.login_name        + '\n' +
                'name: '            + msg.name              + '\n' +
                'dept_name: '       + msg.dept_name         + '\n' +
                'mobile: '          + msg.mobile            + '\n');
        }
      );
  }
  
  function scheduleAdd() {
      var json = {
          "title" : "标题",
          "startTime" : "2021-6-21 10:53",
          "endTime" : "2021-6-21 10:53",
          "alarm" : "-60"//说明：如果传“-60”表示提醒时间为startTime前一分钟，传“0”表示startTime为提醒时间
          }
      function success(result) {
          alert('result : ' + result);
          scheduleDelete(result);
      }
      function error(error) {
          alert('error is ' + error);
      }
      cordova.plugins.mocha.plugin.scheduleManager.add(json, success, error);
  }
  
  function scheduleDelete(id) {
      function success(result) {
          alert('result : ' + result);
      }
      function error(error) {
          alert('error is ' + error);
      }
      MPScheduleManager.delete(id, "", success, error);
  }
  
  function download() {
      MXCommon.download("http://baidu.com/hi/hello.txt?a=2&b=3&")
  }
  
  function launchLocalFilePath() {
      function success(result) {
          alert('result : ' + result);
      }
      function error(error) {
          alert('error is ' + error);
      }
      cordova.plugins.mocha.plugin.localFilePath.launchLocalFilePath(success, error);
  }
    
    function testGetUserName() {
        MPKeyChain.getValueForKey(
                                  MPKeyChain.Constants.USERNAME,
                                  function success(result) {
                                  alert(result);
                                  },
                                  function error(error) {
                                  alert(error);
                                  });
    }
    
    function testGetPassword() {
        MPKeyChain.getValueForKey(
                                  MPKeyChain.Constants.PASSWORD,
                                  function success(result) {
                                  alert(result);
                                  },
                                  function error(error) {
                                  alert(error);
                                  });
    }
    
    function testSetValueForKey() {
        MPKeyChain.setValueForKey(
                                  "username",
                                  "haha",
                                  function success(result) {
                                  alert(result);
                                  MPKeyChain.getValueForKey(
                                                            MPKeyChain.Constants.USERNAME,
                                                            function success(result) {
                                                            alert(result);
                                                            },
                                                            function error(error) {
                                                            alert(error);
                                                            });
                                  
                                  },
                                  function error(error) {
                                  alert(error);
                                  });
    }
    
    
    
    function testSetValueForKey1() {
        MPKeyChain.setValueForKey(
                                  "key",
                                  "haha",
                                  function success(result) {
                                  alert(result);
                                  MPKeyChain.getValueForKey(
                                                            "key",
                                                            function success(result) {
                                                            alert(result);
                                                            },
                                                            function error(error) {
                                                            alert(error);
                                                            });
                                  
                                  },
                                  function error(error) {
                                  alert(error);
                                  });
    }
    
    
    function testAes1() {
        window.webkit.messageHandlers.YYWK.postMessage(['MPWebView', 'close', []]);
    }
    
    function openCamera() {
        var myOptions = {
            quality: 20,
            destinationType: Camera.DestinationType.DATA_URL,
            sourceType: Camera.PictureSourceType.CAMERA,
            allowEdit: true,
            encodingType: Camera.EncodingType.JPEG,
            mediaType: Camera.MediaType.PICTURE,
            cameraDirection: Camera.Direction.BACK
        };
        function success(imageData) {
            //user image data
            alert('user image data');
        }
        function error(error) {
            alert('error is ' + error);
        }
        MPCamera.getPicture(success, error, myOptions);
        
    }
  
  function keyboard() {
      //window.open('keyboard://hello');
      window.webkit.messageHandlers.YYKeyboard.postMessage("open", "");
  }
  
  function closeKeyboard() {
      window.webkit.messageHandlers.YYKeyboard.postMessage("close", "");
  }
    
    function scan() {
        MPBarcodeScanner.scan(
                            function (result) {
                            alert("We got a barcode\n" +
                                  "Result: " + result.text + "\n" +
                                  "Format: " + result.format + "\n" +
                                  "Cancelled: " + result.cancelled);
                            },
                            function (error) {
                            alert("Scanning failed: " + error);
                            },
                            {
                            preferFrontCamera: false, // iOS and Android
                            showFlipCameraButton: true, // iOS and Android
                            showTorchButton: true, // iOS and Android
                            torchOn: false, // Android, launch with the torch switched on (if available)
                            saveHistory: false, // Android, save scan history (default false)
                            prompt: "请将二维码/条形码放入框内,即可扫描", // Android
                            resultDisplayDuration: 500, // Android, display scanned text for X ms. 0 suppresses it entirely, default 1500
                            formats: "QR_CODE,PDF_417", // default: all but PDF_417 and RSS_EXPANDED
                            orientation: "portrait", // Android only (portrait|landscape), default unset so it rotates with the device
                            disableAnimations: false, // iOS
                            disableSuccessBeep: false // iOS and Android
                            }
                            );
                            
    }
    
    function scanFromImage() {
        MPBarcodeScanner.recognizeFromImage(
                                          function (result) {
                                          alert("We got a barcode\n" +
                                                "Result: " + result.text + "\n" +
                                                "Format: " + result.format + "\n" +
                                                "Cancelled: " + result.cancelled);
                                          },
                                          function (error) {
                                          alert("Scanning failed: " + error);
                                          }
                                          );
    }
    
    function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]); return null;
    }
    var header = document.getElementById('header');
    var headerColor = GetQueryString("colorName");
    header.style.backgroundColor = '#' + headerColor;
        </script>
 </body>
</html>
